#
# This file is managed by Ansible.
# Do not edit this file manually.
# Any changes will be automatically reverted.
#
{% if not udev_rename_netiface_clear -%}
  {{ "\n" }}
  {%- set vars = {'missing_hwaddr': False, 'print_nl': False} %}
  {%- if network_ether_interfaces is defined %}
    {#- This will generate udev rules for those devices having hwadd defined #}
    {%- for item in network_ether_interfaces %}
      {%- if 'hwaddr' in item.keys() %}
        {%- if vars.update({'print_nl': True}) %}{% endif -%}
        # {{ item.description }}
        SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="{{ item.hwaddr | lower }}", NAME="{{ item.device }}"{{ "\n" }}
      {%- else %}
        {%- if vars.update({'missing_hwaddr': True}) %}{% endif -%}
      {%- endif %}
    {%- endfor %}
  {%- endif %}

  {%- if network_ether_interfaces is not defined or vars.missing_hwaddr %}
    {%- if vars.print_nl -%}
      {{ "\n" }}
    {%- endif -%}
    # This will prevent the update of the rules file as udev will think that the{{ "\n" }}
    {#- -#}
    # device is already configured (e.g. when biosdevname=0 is used in grub){{ "\n" }}
    {#- -#}
    SUBSYSTEM=="net", DRIVERS=="?*", NAME="%k"
  {%- endif %}
{% endif %}
